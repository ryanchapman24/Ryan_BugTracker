@using Microsoft.AspNet.Identity;

<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie ie9" lang="en" class="no-js"> <![endif]-->
<!--[if !(IE)]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->

<head>
    <title>Anomaly Support</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="KingAdmin - Bootstrap Admin Dashboard Theme">
    <meta name="author" content="The Develovers">
    <!-- CSS -->
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="~/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="~/assets/css/main.css" rel="stylesheet" type="text/css">
    <link href="~/assets/css/my-custom-styles.css" rel="stylesheet" type="text/css">
    <link href="~/assets/css/animate.css" rel="stylesheet" type="text/css" />
    <!--[if lte IE 9]>
        <link href="~/assets/css/main-ie.css" rel="stylesheet" type="text/css"/>
        <link href="~/assets/css/main-ie-part2.css" rel="stylesheet" type="text/css"/>
    <![endif]-->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="~/assets/ico/kingadmin-favicon144x144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="~/assets/ico/kingadmin-favicon114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="~/assets/ico/kingadmin-favicon72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="~/assets/ico/kingadmin-favicon57x57.png">
    <link rel="shortcut icon" href="~/assets/img/AS_logo.png">
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Multiselect PlugIn/css/multi-select.css" rel="stylesheet" />
</head>

<body class="dashboard">
    <!-- WRAPPER -->
    <div class="wrapper">
        <!-- TOP BAR -->
        <div class="top-bar navbar-fixed-top" style="padding-bottom: 18px">
            <div class="container">
                <div class="row">
                    <!-- logo -->
                    <div class="col-md-2 logo" style="text-align: center">
                        <a href="@Url.Action("Index", "Home")"><img src="~/assets/img/AnomalySquared-Logo-Dark-BG.png" style="width: 160px"/></a>
                    </div>
                    <!-- end logo -->
                    <div class="col-md-10">
                        <div class="row">
                            <div class="col-md-3">
                                <!-- search box -->
                                @*<div id="tour-searchbox" class="input-group searchbox">
                                    <input type="search" class="form-control" placeholder="enter keyword here...">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
                                    </span>
                                </div>*@
                                <!-- end search box -->
                            </div>
                            <div class="col-md-9">
                                <div class="top-bar-right" style="margin-top: 20px">
                                    <button type="button" id="global-volume" class="btn btn-link btn-global-volume" style="margin-top: -4px"><i class="fa"></i></button>
                                    <!-- responsive menu bar icon -->
                                    <a href="#" class="hidden-md hidden-lg main-nav-toggle"><i class="fa fa-bars"></i></a>
                                    <!-- end responsive menu bar icon -->
                                    <a href="javascript:history.go(-1)" class=""><i class="fa fa-chevron-left" style="color: white; padding-right: 10px; padding-left: 60px"></i></a>
                                    <a href="javascript:history.go(+1)" class=""><i class="fa fa-chevron-right" style="color: white; padding-right: 10px"></i></a>
                                    <a href="javascript:history.go(0)" class=""><i class="fa fa-refresh" style="color: white; padding-right: 10px"></i></a>
                                    @*<button type="button" id="start-tour" class="btn btn-link"><i class="fa fa-refresh"></i> Start Tour</button>*@
                                    @if (Request.IsAuthenticated)
                                    {
                                        <div class="notifications" style="margin-top: -3px">
                                            <ul>
                                                <!-- notification: inbox -->
                                                @*<li class="notification-item inbox">
                                                        <div class="btn-group">
                                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                                <i class="fa fa-envelope"></i><span class="count">2</span>
                                                                <span class="circle"></span>
                                                            </a>
                                                            <ul class="dropdown-menu" role="menu" style="margin-top: 3px">
                                                                <li class="notification-header">
                                                                    <em>You have 2 unread messages</em>
                                                                </li>
                                                                <li class="inbox-item clearfix">
                                                                    <a href="#">
                                                                        <div class="media">
                                                                            <div class="media-left">
                                                                                <img class="media-object" src="~/assets/img/user1.png" alt="Antonio">
                                                                            </div>
                                                                            <div class="media-body">
                                                                                <h5 class="media-heading name">Antonius</h5>
                                                                                <p class="text">The problem just happened this morning. I can't see ...</p>
                                                                                <span class="timestamp">4 minutes ago</span>
                                                                            </div>
                                                                        </div>
                                                                    </a>
                                                                </li>
                                                                <li class="inbox-item unread clearfix">
                                                                    <a href="#">
                                                                        <div class="media">
                                                                            <div class="media-left">
                                                                                <img class="media-object" src="~/assets/img/user2.png" alt="Antonio">
                                                                            </div>
                                                                            <div class="media-body">
                                                                                <h5 class="media-heading name">Michael</h5>
                                                                                <p class="text">Hey dude, cool theme!</p>
                                                                                <span class="timestamp">2 hours ago</span>
                                                                            </div>
                                                                        </div>
                                                                    </a>
                                                                </li>
                                                                <li class="inbox-item unread clearfix">
                                                                    <a href="#">
                                                                        <div class="media">
                                                                            <div class="media-left">
                                                                                <img class="media-object" src="~/assets/img/user3.png" alt="Antonio">
                                                                            </div>
                                                                            <div class="media-body">
                                                                                <h5 class="media-heading name">Stella</h5>
                                                                                <p class="text">Ok now I can see the status for each item. Thanks! :D</p>
                                                                                <span class="timestamp">Oct 6</span>
                                                                            </div>
                                                                        </div>
                                                                    </a>
                                                                </li>
                                                                <li class="inbox-item clearfix">
                                                                    <a href="#">
                                                                        <div class="media">
                                                                            <div class="media-left">
                                                                                <img class="media-object" src="~/assets/img/user4.png" alt="Antonio">
                                                                            </div>
                                                                            <div class="media-body">
                                                                                <h5 class="media-heading name">Jane Doe</h5>
                                                                                <p class="text"><i class="fa fa-reply"></i> Please check the status of your ...</p>
                                                                                <span class="timestamp">Oct 2</span>
                                                                            </div>
                                                                        </div>
                                                                    </a>
                                                                </li>
                                                                <li class="inbox-item clearfix">
                                                                    <a href="#">
                                                                        <div class="media">
                                                                            <div class="media-left">
                                                                                <img class="media-object" src="~/assets/img/user5.png" alt="Antonio">
                                                                            </div>
                                                                            <div class="media-body">
                                                                                <h5 class="media-heading name">John Simmons</h5>
                                                                                <p class="text"><i class="fa fa-reply"></i> I've fixed the problem :)</p>
                                                                                <span class="timestamp">Sep 12</span>
                                                                            </div>
                                                                        </div>
                                                                    </a>
                                                                </li>
                                                                <li class="notification-footer">
                                                                    <a href="#">View All Messages</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </li>*@
                                                <!-- end notification: inbox -->
                                                <!-- notification: general -->
                                                <li class="notification-item general">
                                                    <div class="btn-group">
                                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                            <i class="fa fa-bell"></i>@if (ViewBag.Notifications.Count != 0)
                                                            {<span class="count"><strong>@ViewBag.Notifications.Count</strong></span><span class="circle"></span>}
                                                        </a>
                                                        <ul class="dropdown-menu pre-scrollable" role="menu" style="overflow-y:auto; margin-top: 15px; max-height: 400px; width: 500px">
                                                            <li class="notification-header">
                                                                @if (ViewBag.Notifications.Count == 0)
                                                                {
                                                                    <em>You don't have any notifications.</em>
                                                                }
                                                                else if (ViewBag.Notifications.Count == 1)
                                                                {
                                                                    <em>You have @ViewBag.Notifications.Count notification.</em>
                                                                }
                                                                else
                                                                {
                                                                    <em>You have @ViewBag.Notifications.Count notifications.</em>
                                                                }
                                                            </li>
                                                                                                                            
                                                            @if (Request.IsAuthenticated && (ViewBag.Notifications.Count != 0))
                                                            {                                                           
                                                                foreach (var notification in ViewBag.Notifications)
                                                                {
                                                                    if (notification.Type == "Assignment")
                                                                    {
                                                                    <li class="line-hover">
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3"><i class="sneaky fa fa-close" style="font-size: 10px; color: #888888"></i></a>
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { tId = notification.TicketId, nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3">
                                                                            <i class="fa fa-ticket" style="color: #E60404"></i>                                                                               
                                                                            <span class="text"><small>@notification.Description</small></span>                                                                        
                                                                            <span class="timestamp" style="padding-right: 5px; font-size: 10px">@notification.Created.ToString("g")</span>                                                 
                                                                        </a>
                                                                    </li>
                                                                    }
                                                                    else if (notification.Type == "Modification")
                                                                    {
                                                                    <li class="line-hover">
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3"><i class="sneaky fa fa-close" style="font-size: 10px; color: #888888"></i></a>
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { tId = notification.TicketId, nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3">
                                                                            <i class="fa fa-edit yellow-font"></i>
                                                                            <span class="text"><small>@notification.Description</small></span>
                                                                            <span class="timestamp" style="padding-right: 5px; font-size: 10px">@notification.Created.ToString("g")</span>                                                 
                                                                        </a>
                                                                    </li>
                                                                    }
                                                                    else if (notification.Type == "Comment")
                                                                    {
                                                                    <li class="line-hover">
                                                                        <a href = "@Url.Action("DismissNotification", "Home", new { nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3"><i class="sneaky fa fa-close" style="font-size: 10px; color: #888888"></i></a>
                                                                        <a href = "@Url.Action("DismissNotification", "Home", new { tId = notification.TicketId, nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3">
                                                                            <i class="fa fa-comment green-font"></i>
                                                                            <span class="text"><small>@notification.Description</small></span>
                                                                            <span class="timestamp" style="padding-right: 5px; font-size: 10px">@notification.Created.ToString("g")</span>                                                 
                                                                        </a>
                                                                    </li>
                                                                    }
                                                                    else if (notification.Type == "Attachment")
                                                                    {
                                                                    <li class="line-hover">
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3"><i class="sneaky fa fa-close" style="font-size: 10px; color: #888888"></i></a>
                                                                        <a href="@Url.Action("DismissNotification", "Home", new { tId = notification.TicketId, nId = notification.Id, dA = false })" style="display: inline; line-height: 2.3">
                                                                            <i class="fa fa-file-text-o" style="color: blue"></i>
                                                                            <span class="text"><small>@notification.Description</small></span>
                                                                            <span class="timestamp" style="padding-right: 5px; font-size: 10px">@notification.Created.ToString("g")</span>
                                                                        </a>
                                                                    </li>
                                                                    }
                                                                }                                                             
                                                            }                                                           
                                                            @if (ViewBag.Notifications.Count > 1)
                                                            {
                                                                <li class="notification-footer">
                                                                    <a href="@Url.Action("DismissNotification", "Home", new { dA = true })">Dismiss All</a>
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                </li>
                                                <!-- end notification: general -->
                                            </ul>
                                        </div>
                                    }
                                    <!-- logged user and the menu -->
                                    @Html.Partial("_LoginPartial")
                                    <!-- end logged user and the menu -->
                                </div>
                                <!-- /top-bar-right -->
                            </div>
                        </div>
                        <!-- /row -->
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- /top -->
        <!-- BOTTOM: LEFT NAV AND RIGHT MAIN CONTENT -->
        <div class="bottom">
            <div class="container">
                <div class="row">
                    <!-- left sidebar -->               
                    <div class="col-md-2 left-sidebar">
                        @*<div class="col-md-2" style="position: fixed; padding: 0px">*@
                        <!-- main-nav -->
                        <nav class="main-nav">
                            <ul class="main-menu">
                                <li class="">
                                    <a href="@Url.Action("Index", "Home")" class="">
                                        <i class="fa fa-dashboard fa-fw"></i><span class="text">D A S H B O A R D</span>
                                        @*<i class="toggle-icon fa fa-angle-down"></i>*@
                                    </a>
                                </li>
                                @if (User.IsInRole("Administrator"))
                                {
                                    <li class="">
                                        <a href="@Url.Action("Index", "Admin")" class="">
                                            <i class="fa fa-key fa-fw"></i><span class="text">A D M I N</span>
                                            @*<i class="toggle-icon fa fa-angle-down"></i>*@
                                        </a>
                                    </li>
                                }
                                <li class="">
                                    <a href="@Url.Action("ProjectList", "Projects")" class="">
                                        <i class="fa fa-gears fa-fw"></i><span class="text">P R O J E C T S</span>
                                        @*<i class="toggle-icon fa fa-angle-down"></i>*@
                                    </a>
                                </li>
                                <li class="">
                                    <a href="@Url.Action("ProfilePage", "Home", new { id = User.Identity.GetUserId() })" class="">
                                        <i class="fa fa-user-plus fa-fw"></i><span class="text">P R O F I L E</span>
                                        @*<i class="toggle-icon fa fa-angle-down"></i>*@
                                    </a>
                                </li>
                                <li class="">
                                    <a href="@Url.Action("MyTickets", "Tickets")" class="">
                                        <i class="fa fa-ticket fa-fw"></i><span class="text">M Y <span style="margin-left: 5px">T I C K E T S</span></span>
                                        @*<i class="toggle-icon fa fa-angle-down"></i>*@
                                    </a>
                                </li>
                            </ul>
                        </nav>
                        <!-- /main-nav -->
                        <div class="sidebar-minified js-toggle-minified">
                            <i class="fa fa-angle-left"></i>
                        </div>
                        <!-- sidebar content -->
                        <div class="sidebar-content">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h5><i class="fa fa-lightbulb-o"></i> Tips</h5>
                                </div>
                                <div class="panel-body" style="background-color: #29AAE3; color: white">
                                    <p>In order to create a ticket, you must first be assigned to a project.  From there, go to your "Projects" tab and create a ticket via the action column in the projects table.</p><hr style="border-top-color: white"/>
                                    <p>The tickets table on your home page will become highly populated over time.  It is easily sortable via the search bar in the upper right corner of the table.  Just type in whatever you want to search for and each column will be sorted through to find your desired result!</p><hr style="border-top-color: white"/>
                                    <p>If you need to update your account information, just click your name on the right side of the navigation bar - then click "Settings."  You can also change your account information from your profile page.</p>
                                </div>
                            </div>
                            @*<h5 class="label label-default"><i class="fa fa-info-circle"></i> Server Info</h5>*@
                            @*<ul class="list-unstyled list-info-sidebar bottom-30px">
                                    <li class="data-row">
                                        <div class="data-name">Disk Space Usage</div>
                                        <div class="data-value">
                                            274.43 / 2 GB
                                            <div class="progress progress-xs">
                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width: 10%">
                                                    <span class="sr-only">10%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="data-row">
                                        <div class="data-name">Monthly Bandwidth Transfer</div>
                                        <div class="data-value">
                                            230 / 500 GB
                                            <div class="progress progress-xs">
                                                <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="46" aria-valuemin="0" aria-valuemax="100" style="width: 46%">
                                                    <span class="sr-only">46%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">Database Disk Space</span>
                                        <span class="data-value">219.45 MB</span>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">Operating System</span>
                                        <span class="data-value">Linux</span>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">Apache Version</span>
                                        <span class="data-value">2.4.6</span>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">PHP Version</span>
                                        <span class="data-value">5.3.27</span>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">MySQL Version</span>
                                        <span class="data-value">5.5.34-cll</span>
                                    </li>
                                    <li class="data-row">
                                        <span class="data-name">Architecture</span>
                                        <span class="data-value">x86_64</span>
                                    </li>
                                </ul>*@
                        </div>
                        <!-- end sidebar content -->
                        @*</div>*@
                    </div>
                    <!-- end left sidebar -->
                    <!-- main -->
                    <div class="col-md-10 content-wrapper" style="padding-top: 30px; min-height: 1500px">
                        @RenderBody()
                    </div>
                    <!-- /main -->
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
        <!-- END BOTTOM: LEFT NAV AND RIGHT MAIN CONTENT -->
    </div>
    <!-- /wrapper -->
    <!-- FOOTER -->
    <footer class="footer">
        <strong>&copy; Anomaly Squared | @DateTime.Now.Year</strong>
    </footer>
    <!-- END FOOTER -->
    <!-- Javascript -->
    <script src="~/assets/js/jquery/jquery-2.1.0.min.js"></script>
    <script src="~/assets/js/bootstrap/bootstrap.js"></script>
    <script src="~/assets/js/plugins/modernizr/modernizr.js"></script>
    <script src="~/assets/js/plugins/bootstrap-tour/bootstrap-tour.custom.js"></script>
    <script src="~/assets/js/king-common.js"></script>
    <script src="~/assets/js/plugins/stat/jquery.easypiechart.min.js"></script>
    <script src="~/assets/js/plugins/raphael/raphael-2.1.0.min.js"></script>
    <script src="~/assets/js/plugins/stat/flot/jquery.flot.min.js"></script>
    <script src="~/assets/js/plugins/stat/flot/jquery.flot.resize.min.js"></script>
    <script src="~/assets/js/plugins/stat/flot/jquery.flot.time.min.js"></script>
    <script src="~/assets/js/plugins/stat/flot/jquery.flot.pie.min.js"></script>
    <script src="~/assets/js/plugins/stat/flot/jquery.flot.tooltip.min.js"></script>
    <script src="~/assets/js/plugins/jquery-sparkline/jquery.sparkline.min.js"></script>
    <script src="~/assets/js/plugins/datatable/jquery.dataTables.min.js"></script>
    <script src="~/assets/js/plugins/datatable/dataTables.bootstrap.js"></script>
    <script src="~/assets/js/plugins/jquery-mapael/jquery.mapael.js"></script>
    <script src="~/assets/js/plugins/raphael/maps/usa_states.js"></script>
    <script src="~/assets/js/king-chart-stat.js"></script>
    <script src="~/assets/js/king-table.js"></script>
    <script src="~/assets/js/king-components.js"></script>
    <script src="~/Multiselect PlugIn/js/jquery.multi-select.js"></script>
    <script src="~/Multiselect PlugIn/js/jquery.quicksearch.js"></script>
    <script src="~/Scripts/MultiSelect.js"></script>
    <script src="~/assets/js/plugins/dropzone/dropzone.js"></script>
    <script src="~/assets/js/king-elements.js"></script>
    <script src="~/assets/js/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
    @RenderSection("scripts", required: false)
    <script>
        $(document).ready(function () {
            $('#custom-headers').multiSelect({
                selectableHeader: "<div class='custom-header' style='text-align: center; background-color: #031B25; color: white'><strong>Available Roles</strong></div>",
                selectionHeader: "<div class='custom-header' style='text-align: center; background-color: #031B25; color: white'><strong>User Roles</strong></div>"
            });
        });
    </script> 
</body>

</html>
